TOKEN = ''
GROUP_ID = '200177230'

FLIGHT_TIMETABLE = {
    'МОСКВА': {
        'ЛОНДОН': {
            'flight_weekdays': [1, 4],
            'flight_dates': [],
            'time': '10:30'
        },
        'ПАРИЖ': {
            'flight_weekdays': [],
            'flight_dates': [10, 20],
            'time': '11:20'
        },
        'НЬЮ-ЙОРК': {
            'flight_weekdays': [],
            'flight_dates': [11, 21],
            'time': '09:10'
        },
        'ПЕКИН': {
            'flight_weekdays': [2, 5],
            'flight_dates': [],
            'time': '23:30'
        },
        'СЕУЛ': {
            'flight_weekdays': [],
            'flight_dates': [5, 10, 15, 20],
            'time': '14:50'
        },
        'БЕРЛИН': {
            'flight_weekdays': [2, 7],
            'flight_dates': [],
            'time': '21:40'
        },
        'ТОКИО': {
            'flight_weekdays': [],
            'flight_dates': [10, 20],
            'time': '15:50'
        },
        'ОТТАВА': {
            'flight_weekdays': [3, 6],
            'flight_dates': [],
            'time': '13:20'
        },
    },
    'ЛОНДОН': {
        'ПАРИЖ': {
            'flight_weekdays': [],
            'flight_dates': [4, 12, 20, 28],
            'time': '10:30'
        },
        'МОСКВА': {
            'flight_weekdays': [1, 3, 7],
            'flight_dates': [],
            'time': '08:10'
        },
        'НЬЮ-ЙОРК': {
            'flight_weekdays': [1, 5],
            'flight_dates': [],
            'time': '04:20'
        },
        'ПЕКИН': {
            'flight_weekdays': [],
            'flight_dates': [10, 20],
            'time': '06:50'
        },
        'СЕУЛ': {
            'flight_weekdays': [2, 6],
            'flight_dates': [],
            'time': '10:10'
        },
        'БЕРЛИН': {
            'flight_weekdays': [],
            'flight_dates': [11, 21],
            'time': '07:20'
        },
        'ТОКИО': {
            'flight_weekdays': [3, 6],
            'flight_dates': [],
            'time': '11:10'
        },
        'ОТТАВА': {
            'flight_weekdays': [],
            'flight_dates': [8, 16, 24],
            'time': '17:50'
        }
    },
    'ПАРИЖ': {
        'МОСКВА': {
            'flight_weekdays': [],
            'flight_dates': [4, 12, 20, 28],
            'time': '13:30'
        },
        'ЛОНДОН': {
            'flight_weekdays': [1, 3, 7],
            'flight_dates': [],
            'time': '08:50'
        },
        'НЬЮ-ЙОРК': {
            'flight_weekdays': [],
            'flight_dates': [10, 20],
            'time': '19:00'
        },
        'ПЕКИН': {
            'flight_weekdays': [2, 6],
            'flight_dates': [],
            'time': '12:00'
        },
        'СЕУЛ': {
            'flight_weekdays': [2, 6],
            'flight_dates': [],
            'time': '17:10'
        },
        'БЕРЛИН': {
            'flight_weekdays': [],
            'flight_dates': [8, 16, 24],
            'time': '14:20'
        },
        'ОТТАВА': {
            'flight_weekdays': [],
            'flight_dates': [10, 20],
            'time': '21:50'
        }
    },
    'НЬЮ-ЙОРК': {
        'МОСКВА': {
            'flight_weekdays': [1, 3, 7],
            'flight_dates': [],
            'time': '05:40'
        },
        'ЛОНДОН': {
            'flight_weekdays': [],
            'flight_dates': [4, 12, 20, 28],
            'time': '16:10'
        },
        'ПАРИЖ': {
            'flight_weekdays': [2, 6],
            'flight_dates': [],
            'time': '18:20'
        },
        'СЕУЛ': {
            'flight_weekdays': [],
            'flight_dates': [10, 20],
            'time': '13:10'
        },
        'БЕРЛИН': {
            'flight_weekdays': [],
            'flight_dates': [8, 16, 24],
            'time': '13:30'
        },
        'ТОКИО': {
            'flight_weekdays': [],
            'flight_dates': [10, 20],
            'time': '06:40'
        },
        'ОТТАВА': {
            'flight_weekdays': [1, 3, 7],
            'flight_dates': [],
            'time': '13:20'
        },
        'КАНБЕРРА': {
            'flight_weekdays': [2, 6],
            'flight_dates': [],
            'time': '15:50'
        }
    },
    'ПЕКИН': {
        'МОСКВА': {
            'flight_weekdays': [],
            'flight_dates': [4, 12, 20, 28],
            'time': '22:00'
        },
        'ЛОНДОН': {
            'flight_weekdays': [1, 3, 7],
            'flight_dates': [],
            'time': '14:00'
        },
        'ПАРИЖ': {
            'flight_weekdays': [],
            'flight_dates': [8, 16, 24],
            'time': '19:00'
        },
        'СЕУЛ': {
            'flight_weekdays': [2, 6],
            'flight_dates': [],
            'time': '19:10'
        },
        'БЕРЛИН': {
            'flight_weekdays': [],
            'flight_dates': [10, 20],
            'time': '15:20'
        },
        'ТОКИО': {
            'flight_weekdays': [1, 5],
            'flight_dates': [],
            'time': '10:50'
        },
        'КАНБЕРРА': {
            'flight_weekdays': [1, 3, 7],
            'flight_dates': [],
            'time': '17:00'
        }
    },
    'СЕУЛ': {
        'МОСКВА': {
            'flight_weekdays': [2, 6],
            'flight_dates': [],
            'time': '10:00'
        },
        'ЛОНДОН': {
            'flight_weekdays': [],
            'flight_dates': [8, 16, 24],
            'time': '21:50'
        },
        'ПАРИЖ': {
            'flight_weekdays': [1, 3, 7],
            'flight_dates': [],
            'time': '19:40'
        },
        'НЬЮ-ЙОРК': {
            'flight_weekdays': [1, 5],
            'flight_dates': [],
            'time': '09:40'
        },
        'ПЕКИН': {
            'flight_weekdays': [],
            'flight_dates': [4, 12, 20, 28],
            'time': '19:50'
        },
        'БЕРЛИН': {
            'flight_weekdays': [],
            'flight_dates': [8, 16, 24],
            'time': '23:30'
        },
        'ТОКИО': {
            'flight_weekdays': [1, 6],
            'flight_dates': [],
            'time': '17:20'
        },
        'ОТТАВА': {
            'flight_weekdays': [1, 3, 7],
            'flight_dates': [],
            'time': '21:20'
        },
        'КАНБЕРРА': {
            'flight_weekdays': [],
            'flight_dates': [10, 20],
            'time': '10:50'
        }
    },
    'БЕРЛИН': {
        'МОСКВА': {
            'flight_weekdays': [2, 6],
            'flight_dates': [],
            'time': '11:30'
        },
        'ЛОНДОН': {
            'flight_weekdays': [1, 5, 7],
            'flight_dates': [],
            'time': '15:40'
        },
        'ПАРИЖ': {
            'flight_weekdays': [],
            'flight_dates': [4, 12, 20, 28],
            'time': '10:10'
        },
        'НЬЮ-ЙОРК': {
            'flight_weekdays': [1, 3, 7],
            'flight_dates': [],
            'time': '15:00'
        },
        'ПЕКИН': {
            'flight_weekdays': [],
            'flight_dates': [10, 20],
            'time': '21:30'
        },
        'СЕУЛ': {
            'flight_weekdays': [],
            'flight_dates': [8, 16, 24],
            'time': '00:10'
        },
        'ОТТАВА': {
            'flight_weekdays': [],
            'flight_dates': [10, 20],
            'time': '09:30'
        }
    },
    'ТОКИО': {
        'МОСКВА': {
            'flight_weekdays': [1, 3, 7],
            'flight_dates': [],
            'time': '18:10'
        },
        'ЛОНДОН': {
            'flight_weekdays': [],
            'flight_dates': [10, 20],
            'time': '08:40'
        },
        'НЬЮ-ЙОРК': {
            'flight_weekdays': [1, 5],
            'flight_dates': [],
            'time': '07:20'
        },
        'ПЕКИН': {
            'flight_weekdays': [2, 6],
            'flight_dates': [],
            'time': '09:40'
        },
        'СЕУЛ': {
            'flight_weekdays': [],
            'flight_dates': [4, 12, 20, 28],
            'time': '15:50'
        },
        'ОТТАВА': {
            'flight_weekdays': [1, 3, 7],
            'flight_dates': [],
            'time': '05:50'
        },
        'КАНБЕРРА': {
            'flight_weekdays': [],
            'flight_dates': [8, 16, 24],
            'time': '16:20'
        }
    },
    'ОТТАВА': {
        'МОСКВА': {
            'flight_weekdays': [],
            'flight_dates': [10, 20],
            'time': '16:00'
        },
        'ЛОНДОН': {
            'flight_weekdays': [1, 5],
            'flight_dates': [],
            'time': '09:10'
        },
        'ПАРИЖ': {
            'flight_weekdays': [],
            'flight_dates': [8, 16, 24],
            'time': '18:00'
        },
        'НЬЮ-ЙОРК': {
            'flight_weekdays': [1, 3, 7],
            'flight_dates': [],
            'time': '10:20'
        },
        'СЕУЛ': {
            'flight_weekdays': [2, 6],
            'flight_dates': [],
            'time': '13:40'
        },
        'БЕРЛИН': {
            'flight_weekdays': [],
            'flight_dates': [10, 20],
            'time': '22:10'
        },
        'ТОКИО': {
            'flight_weekdays': [1, 3, 5],
            'flight_dates': [],
            'time': '10:30'
        }
    },
    'КАНБЕРРА': {
        'НЬЮ-ЙОРК': {
            'flight_weekdays': [2, 6],
            'flight_dates': [],
            'time': '10:10'
        },
        'ПЕКИН': {
            'flight_weekdays': [],
            'flight_dates': [10, 20],
            'time': '14:30'
        },
        'СЕУЛ': {
            'flight_weekdays': [],
            'flight_dates': [4, 12, 20, 28],
            'time': '20:20'
        },
        'ТОКИО': {
            'flight_weekdays': [1, 3, 7],
            'flight_dates': [],
            'time': '09:40'
        }
    }
}

AVAILABLE_CITIES = '\n'.join(city for city in FLIGHT_TIMETABLE.keys())
GREETINGS_PATTERN = r'прив|здравс|hell|hi'
HELP_PATTERN = '/help'
TICKET_PATTERN = '/ticket'
DEFAULT_ANSWER = 'Я не умею такое обрабатывать'

INTENTS = {
    'Greetings': {
        'name': 'Приветствие',
        'tokens': ('прив', 'здравс', 'hell', 'hi'),
        'scenario': None,
        'answer': 'Здравствуйте! Я помогу вам заказать авиабилеты по выбранному вами направлению.\n'
                  'Для начала сценария бронирования введите слово "заказ" и следуйте дальнейшим указаниям.\n'
                  'Для получения детальной справки введите /help.\n'
                  'Для запуска сценария бронирования билетов с начала введите /ticket.'
    },
    'Help': {
        'name': 'Справка',
        'tokens': '/help',
        'scenario': None,
        'answer': f'Эта программа помогает забронировать авиабилеты, согласно вашим предпочтениям. '
                  f'Для запуска сценария введите слово "заказ".\nСписок доступных городов:\n'
                  f'\n{AVAILABLE_CITIES}\n'
                  f'\nДалее вы сможете выбрать место назначения и '
                  f'программа предложит вам на выбор возможные даты вылета. '
                  f'После чего вам предстоит указать некоторые дополнительные сведения. '
                  f'Помимо этого вы можете воспользоваться специальными командами:\n'
                  f'\n/ticket - Запускает сценарий бронирования билета с самого начала.\n'
                  f'/help - Предоставляет справку о работе программы'
    },
    'Ticket': {
        'name': 'Начало сценария с начала',
        'tokens': '/ticket',
        'scenario': '',
        'answer': 'Текущий сценарий бронирования билетов был прерван по вашему запросу.\n'
                  'Для повторного бронирования билетов отправьте слово "заказ".'
    },
    'Order': {
        'name': 'Заказ билетов',
        'tokens': ('заказ', 'брон', 'куп', 'рег'),
        'scenario': 'order_ticket',
        'answer': ''
    },
}

SCENARIOS = {
    'order_ticket': {
        'first_step': 'choose_departure_city',
        'steps': {
            'choose_departure_city': {
                'initial_text': 'Выберите город отправления',
                'failure_text': f'Из выбранного города нет рейсов. Вы можете выбрать город из перечисленных ниже:\n'
                                f'{AVAILABLE_CITIES}',
                'answer_text': 'Выберите город назначения',
                'text_to_send': '',
                'handler': 'handle_departure_city',
                'next_step': 'choose_destination_city'
            },
            'choose_destination_city': {
                'answer_text': 'Введите желаемую дату вылета в формате ДД-MM-ГГГГ',
                'answer_text_2': 'Между выбранными городами нет сообщения. '
                                 'Сценарий бронирования билетов завершен. '
                                 'Для повторного бронирования начните с ввода города отправления.',
                'text_to_send': '',
                'handler': 'handle_destination_city',
                'next_step': 'ask_date'
            },
            'ask_date': {
                'failure_text': 'Неправильно введена дата вылета. '
                                'Пожалуйста, введите желаемую дату в формате ДД-MM-ГГГГ',
                'alternative_failure_text': 'Невозможно забронировать билет с датой вылета более чем через 2 года.'
                                            'Забронируйте дату поближе :)',
                'answer_text': 'Ближайшие даты полета по выбранному вами направлению:\n{_dates_list}\n'
                               'Введите номер даты вылета из предложенных выше',
                'text_to_send': '',
                'handler': 'handle_ask_date',
                'next_step': 'choose_date'
            },
            'choose_date': {
                'failure_text': 'Похоже, вы выбрали номер, которого нет в списке. '
                                'Пожалуйста, выберите номер одного из предложенных рейсов',
                'answer_text': 'Введите свое имя',
                'text_to_send': '',
                'handler': 'handle_chosen_date',
                'next_step': 'choose_name'
            },
            'choose_name': {
                'failure text': '',
                'answer_text': 'Введите количество пассажиров от 1 до 5',
                'text_to_send': '',
                'handler': 'handle_name',
                'next_step': 'choose_passengers_amount'
            },
            'choose_passengers_amount': {
                'failure_text': 'Количество пассажиров в одном бронировании может составлять от 1 до 5 человек.'
                                'Пожалуйста, выберите корректное число пассажиров.',
                'answer_text': 'Введите свой e-mail',
                'text_to_send': '',
                'handler': 'handle_passengers_amount',
                'next_step': 'choose_email'
            },
            'choose_email': {
                'failure_text': '',
                'answer_text': 'Введите коментарий к заказу в произвольной форме',
                'text_to_send': '',
                'handler': 'handle_email',
                'next_step': 'write_comment'
            },
            'write_comment': {
                'failure_text': '',
                'answer_text': 'Детали вашего заказа:\n'
                               'Пункт отправления - {departure_city}\n'
                               'Пункт назначения - {destination_city}\n'
                               'Дата вылета - {flight_datetime}\n'
                               'Ваше имя - {name}\n'
                               'Количество пассажиров - {passengers_amount}\n'
                               'Ваш e-mail - {email}\n'
                               'Комментарий: {comment}\n'
                               '\nЕсли информация верна, введите "да", в обратном случае - "нет"',
                'text_to_send': '',
                'handler': 'handle_comment',
                'next_step': 'get_feedback'
            },
            'get_feedback': {
                'failure_text': 'Не могу распознать ваш ответ. '
                                'Введите "да", если информация о вашем бронировании верна, в противном случае - "нет".',
                'answer_text': 'Пожалуйста, введите свой номер телефона для связи',
                'answer_text_2': 'Сценарий заказа билетов завершен, вы можете попробовать заново. '
                                 'Начните с ввода города отправления',
                'text_to_send': '',
                'handler': 'handle_feedback',
                'next_step': 'get_phone_number'
            },
            'get_phone_number': {
                'failure_text': '',
                'answer_text': 'Спасибо за обращение, мы свяжемся с вами по указанному номеру телефона {phone_number}',
                'text_to_send': '',
                'image': 'handle_ticket',
                'handler': 'handle_phone_number',
                'next_step': None
            },
        }
    }
}


DB_CONFIG = dict(
    provider='postgres',
    user='postgres',
    password='tub458tub458',
    host='localhost',
    database='vk_chat_bot'
)
